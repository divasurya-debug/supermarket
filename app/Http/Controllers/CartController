<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use App\Models\Cart;

class CartController extends Controller
{
    public function store(Request $request)
    {
        $cart = Cart::updateOrCreate(
            [
                'id_user' => auth()->id(),
                'id_produk' => $request->id_produk
            ],
            [
                'jumlah' => \DB::raw('jumlah + 1')
            ]
        );

        return redirect()->back()->with('success', 'Produk ditambahkan ke keranjang!');
    }

    public function index()
    {
        $cartItems = Cart::with('product')
            ->where('id_user', auth()->id())
            ->get();

        return view('frontend.cart.index', compact('cartItems'));
    }
}
